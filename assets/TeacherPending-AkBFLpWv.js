import{u as I,j as e,r as P,C as D,b as U,d as _,f as p,h as j,g as S,V as n,e as L,m as E}from"./index-C3nUj576.js";import{O as A}from"./Overview-nnNJfL8E.js";import{F as R}from"./FormInput-1d8WEDYX.js";const O="/testrt/assets/assignment-DuKkyjWK.png";function B(){const{t:s}=I();return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx("button",{type:"button",className:`btn\r
                       bg-white  text-[var(--secondary-color)]\r
                        hover:text-white hover:bg-[var(--secondary-color)] transition-colors duration-300 shadow-md border-[var(--secondary-color)]`,onClick:()=>document.getElementById("my_modal_1").showModal(),children:s("terms.readTerms")}),e.jsx("dialog",{id:"my_modal_1",className:"modal",children:e.jsxs("div",{className:"modal-box",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-10",children:e.jsx("img",{src:O,alt:"terms"})}),e.jsx("h3",{className:"font-bold text-lg text-[var(--primary-color)]",children:s("terms.title")})]}),e.jsxs("div",{className:"py-4 ",children:[e.jsxs("p",{className:"flex items-baseline text-sm",children:[e.jsx("i",{className:"fa-regular fa-circle-dot mr-1 text-[var(--secondary-color)]"}),s("terms.accurateInformation")]}),e.jsx("br",{}),e.jsxs("p",{className:"flex items-baseline text-sm",children:[e.jsx("i",{className:"fa-regular fa-circle-dot mr-1 text-[var(--secondary-color)]"}),s("terms.profileReview")]}),e.jsx("br",{}),e.jsxs("p",{className:"flex items-baseline text-sm",children:[e.jsx("i",{className:"fa-regular fa-circle-dot mr-1 text-[var(--secondary-color)]"}),s("terms.noInappropriateContent")]}),e.jsx("br",{}),e.jsxs("p",{className:"flex items-baseline text-sm",children:[e.jsx("i",{className:"fa-regular fa-circle-dot mr-1 text-[var(--secondary-color)]"}),s("terms.professionalConduct")]}),e.jsx("br",{}),e.jsxs("p",{className:"flex items-baseline text-sm",children:[e.jsx("i",{className:"fa-regular fa-circle-dot mr-1 text-[var(--secondary-color)]"}),s("terms.accountSuspension")]}),e.jsx("br",{}),e.jsxs("p",{className:"flex items-baseline text-sm",children:[e.jsx("i",{className:"fa-regular fa-circle-dot mr-1 text-[var(--secondary-color)]"}),s("terms.pricingPolicies")]}),e.jsx("br",{}),e.jsxs("p",{className:"flex items-baseline text-sm",children:[e.jsx("i",{className:"fa-regular fa-circle-dot mr-1 text-[var(--secondary-color)]"}),s("terms.approvalNotGuaranteed")]})]}),e.jsx("div",{className:"modal-action",children:e.jsx("button",{type:"button",onClick:()=>document.getElementById("my_modal_1").close(),className:`btn text-white \r
                              bg-[var(--primary-color)] hover:bg-white hover:text-[var(--primary-color)] transition-colors duration-300 shadow-md \r
                              border-[var(--primary-color)]`,children:s("close")})})]})})]})})}function V(){return e.jsxs("div",{className:"w-2/6",children:[e.jsx("div",{className:"text-center text-2xl font-semibold text-shadow-lg",children:e.jsx("h2",{children:"Welcome aboard! Weâ€™re excited to have you here! Fill in your details and begin your teaching journey."})}),e.jsx("img",{src:"/images/online-learning-animate.svg",alt:"A description of the animation"})]})}function T({name:s,label:u,options:l=[],register:x,rules:r,error:d}){return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("select",{className:`select select-lg rounded-xl shadow-md focus:ring-1 \r
            focus:ring-[var(--light-secondary-color)]\r
            focus:outline focus:outline-[var(--light-secondary-color)]\r
            focus:border-[var(--light-secondary-color)] w-full`,defaultValue:"",...x(s,r),children:[e.jsxs("option",{value:"",className:"text-gray-300",disabled:!0,children:["Select ",u]}),l.map((t,h)=>{const g=typeof t=="object"?t.value:t,f=typeof t=="object"?t.label:t;return e.jsx("option",{value:g,children:f},h)})]}),d&&e.jsxs("div",{className:"text-red-500 text-sm lg:text-xl",children:[e.jsx("i",{className:"fa-solid fa-circle-exclamation"}),e.jsxs("span",{className:"text-sm",children:[" ",d.message," "]})]})]})})}function G(){const[s,u]=P.useState(0),[l]=D(L),x=U(),{t:r}=I(),d={Image:"",name:"",subject:"",gradeLevel:"",lessonType:"Online",hourlyRate:"",firstLessonFree:!1,overview:"",certificate:null,agreeTerms:!1},{register:t,handleSubmit:h,reset:g,watch:f,formState:{errors:i,isSubmitting:v}}=_({defaultValues:d});P.useEffect(()=>{(async()=>{const c=p(j,"newTeachers",l.uid);if(!l)return;const o=await S(c);o.exists()&&o.data().approved===!0&&n.success(r("teacherPending.profileAlreadyApproved"))})()},[l,x]);const C=async a=>{if(l)try{let c="";const o=a.certificate[0];if(!o){n.error(r("teacherPending.pleaseUploadCertificate"));return}c=(await n.promise((async()=>{const m=new FormData;m.append("file",o),m.append("upload_preset","im54mwpi");const w=await fetch("https://api.cloudinary.com/v1_1/dhcclmr8d/upload",{method:"POST",body:m});if(!w.ok)throw new Error("Cloudinary upload failed.");return await w.json()})(),{loading:r("teacherPending.uploadingCertificate"),success:r("teacherPending.certificateUploaded"),error:r("teacherPending.certificateUploadFailed")})).secure_url,console.log("Uploaded file URL:",c);const b={...a};delete b.certificate;const k=p(j,"users",l.uid),y=await S(k);let N="";y.exists()&&(N=y.data().name);const q=p(j,"newTeachers",l.uid);await E(q,{...b,hourlyRate:Number(a.hourlyRate)||null,ownerId:l.uid,name:N,submitted:!0,approved:!1,certificateUrl:c},{merge:!0}),n.success(r("teacherPending.profileSubmitted")),g()}catch(c){console.error(c),n.error(r("teacherPending.failedToSubmitProfile"))}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container py-40 flex gap-9",children:[e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"text-2xl mb-5 font-semibold",children:r("teacherPending.title")}),e.jsxs("form",{onSubmit:h(C),children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx(R,{label:r("teacherPending.profileImageUrl"),type:"text",placeholder:r("teacherPending.profileImagePlaceholder"),name:"Image",register:t,rules:{validate:a=>!a||/^https?:\/\/.+\.(jpg|jpeg|png|gif)$/i.test(a)||r("teacherPending.invalidImageUrl")},error:i.Image}),e.jsxs("div",{className:"grid grid-cols-3 gap-5",children:[e.jsx(T,{name:"subject",label:r("teacherPending.subject"),options:["Math","English","Science","History","Geography","Biology","Chemistry","Physics","Italy"].map(a=>({value:a,label:r(`subjects.${a}`)||a})),register:t,rules:{required:r("teacherPending.subjectRequired")},error:i.subject}),e.jsx(T,{name:"gradeLevel",label:r("teacherPending.gradeLevel"),options:["Preparatory","Secondary"].map(a=>({value:a,label:r(`gradeLevels.${a}`)||a})),register:t,rules:{required:r("teacherPending.gradeLevelRequired")},error:i.gradeLevel}),e.jsx(R,{label:r("teacherPending.hourlyRate"),type:"number",placeholder:r("teacherPending.hourlyRatePlaceholder"),name:"hourlyRate",min:"0",register:t,rules:{required:r("teacherPending.priceRequired")},error:i.hourlyRate})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:".pdf, .jpg, .jpeg, .png",className:`file-input\r
                  rounded-xl shadow-md w-full\r
                              focus:ring-1 focus:ring-[var(--light-secondary-color)]\r
                              focus:outline focus:outline-[var(--light-secondary-color)]\r
                              focus:border-[var(--light-secondary-color)] `,...t("certificate",{required:r("teacherPending.certificateRequired")})}),i.certificate&&e.jsxs("div",{className:"text-red-500 text-sm lg:text-xl",children:[e.jsx("i",{className:"fa-solid fa-circle-exclamation"}),e.jsxs("span",{className:"text-sm",children:[" ",i.certificate.message," "]})]})]}),e.jsx(A,{register:t,error:i.overview,overviewCount:s,setOverviewCount:u}),e.jsx(B,{}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",className:"checkbox mr-2 border-[var(--light-secondary-color)] bg-[var(--light-secondary-color)] checked:border-orange-500 checked:bg-[var(--secondary-color)] checked:text-orange-800",...t("agreeTerms",{required:!0})}),e.jsx("label",{children:r("teacherPending.termsAndConditions")}),i.agreeTerms&&e.jsxs("div",{className:"text-red-500 text-sm lg:text-xl",children:[e.jsx("i",{className:"fa-solid fa-circle-exclamation"}),e.jsxs("span",{className:"text-sm",children:[" ",r("teacherPending.mustAgreeBeforeSubmitting")," "]})]})]})]}),e.jsx("button",{type:"submit",disabled:!f("agreeTerms")||v,className:`btn mt-8 text-white bg-[var(--secondary-color)] rounded-3xl \r
               hover:bg-white hover:text-[var(--secondary-color)] transition-colors duration-300 shadow-md border-[var(--secondary-color)]`,children:r(v?"teacherPending.submitting":"teacherPending.submitForReview")})]})]}),e.jsx(V,{})]})})}export{G as default};
