import{c as j,b as w,d as b,j as e,N as v,s as N,e as y,g as L,f as S,h as E,V as i,i as q}from"./index-C3nUj576.js";import{S as F,G as I,a as P}from"./SignBtn-BWvpcj9E.js";import{L as D}from"./Logo-O8ip7S7C.js";import{F as o}from"./FormInput-1d8WEDYX.js";function R(){const c=j(),a=w(),{register:n,handleSubmit:d,reset:m,formState:{errors:l}}=b(),u=async x=>{const{email:g,password:h}=x;try{const s=await N(y,g,h),p=s.user.uid,t=await L(S(E,"users",p));if(!t.exists()){i.error("user not found, please register first");return}const r=t.data().role,f={uid:s.user.uid,email:s.user.email,name:t.data().name,image:s.user.Image,role:r};c(q(f)),i.success("Logged in successfully!"),m(),r==="admin"?a("/admin"):r==="teacher"?a("/teacher"):r==="student"?a("/"):r==="teacherPending"&&a("/pending")}catch(s){console.error(s),i.error("Something went wrong")}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex bg-[var(--background-color)]",children:[e.jsxs("div",{className:"w-5/6 mx-auto lg:w-2/4 rounded-3xl lg:rounded-none py-15 px-8 flex flex-col items-center",children:[e.jsx(D,{}),e.jsxs("form",{onSubmit:d(u),className:"flex flex-col items-center mb-5 w-full gap-4 ",children:[e.jsx("h2",{className:"text-xl md:text-3xl mb-3 font-bold text-center text-[var(--main-text-color)]",children:"Login"}),e.jsx("div",{className:"w-full md:w-4/6",children:e.jsx(o,{label:"Email",type:"email",placeholder:"Enter your email...",name:"email",register:n,rules:{required:"Email is required",pattern:{value:/[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+/,message:"Email is not valid"}},error:l.email})}),e.jsx("div",{className:"w-full  md:w-4/6",children:e.jsx(o,{label:"Password",type:"password",placeholder:"Enter your password...",name:"password",register:n,rules:{required:"Password is required"},error:l.password})}),e.jsx(F,{label:"Login"})]}),e.jsx("div",{className:"mb-5",children:e.jsxs("p",{className:"text-center",children:["Don't have an account?"," ",e.jsxs(v,{to:"/role",children:[" ",e.jsx("b",{className:"text-[var(--primary-color)]",children:"Register"})," "]})," "]})}),e.jsx("div",{className:"divider w-5/6 mx-auto mb-9",children:e.jsxs("p",{className:"mb-3",children:[e.jsx("b",{children:"Login "}),"With Others"]})}),e.jsx(I,{})]}),e.jsx(P,{imgClass:"min-h-screen"})]})})}export{R as default};
