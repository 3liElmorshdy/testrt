import{b as N,k as P,d as L,j as e,N as q,l as S,e as E,m as i,f as d,h as m,n as x,V as h}from"./index-CUnXo-ZD.js";import{S as R,G as A,a as F}from"./SignBtn-AyS9AxRi.js";import{L as I}from"./Logo-CGK2IMbq.js";import{F as l}from"./FormInput-uQ1WzOkl.js";function G(){const p=N(),c=P().state?.selectedRole||"student",{register:s,handleSubmit:g,watch:w,reset:f,formState:{errors:a}}=L(),b=async t=>{console.log(t);const{email:u,password:j,username:n,phone:v}=t;try{const r=(await S(E,u,j)).user.uid,y=c==="teacher"?"teacherPending":"student";await i(d(m,"users",r),{email:u,name:n,phone:v,role:y,createdAt:x()}),c==="teacher"?await i(d(m,"newTeachers",r),{ownerId:r,name:n,overview:"",subject:"",Image:"",gradeLevel:"",lessonType:"Online",firstLessonFree:!1,hourlyRate:null,availableDates:[],availablGroupeDates:[],approved:!1,submitted:!1,createdAt:x()},{merge:!0}):await i(d(m,"students",r),{studentId:r,name:n}),h.success("Registered Successfully!"),f(),p("/login")}catch(o){console.error(o),h.error(o.message)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex bg-[var(--background-color)]",children:[e.jsxs("div",{className:"w-5/6 mx-auto lg:w-3/6 rounded-3xl lg:rounded-none py-5 px-8 flex flex-col items-center",children:[e.jsx(I,{}),e.jsxs("form",{onSubmit:g(b),className:"flex flex-col items-center mb-5 w-full px-3",children:[e.jsxs("h2",{className:"text-lg lg:text-3xl md:text-2xl md:mb-3 font-bold text-center",children:["Hey, We are glad you ",e.jsx("br",{})," chose Learnify"]}),e.jsx("div",{className:"divider w-full lg:w-5/6 mx-auto mb-5",children:"Lets get started"}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between w-full md:gap-5 gap-3 mb-3 md:mb-4",children:[e.jsx("div",{className:"lg:w-3/6 md:w-2/4",children:e.jsx(l,{label:"Name",type:"text",placeholder:"Enter your name...",name:"username",register:s,rules:{required:"Username is required",minLength:{value:6,message:"Username must be at least 6 characters"}},error:a.username})}),e.jsx("div",{className:"lg:w-3/6 md:w-2/4",children:e.jsx(l,{label:"Phone",type:"tel",placeholder:"Enter your phone number...",name:"phone",register:s,rules:{required:"Phone is required",pattern:{value:/^[0-9]{10,12}$/,message:"Phone number must contain only digits"}},error:a.phone})})]}),e.jsx("div",{className:"w-full mb-3 md:mb-4",children:e.jsx(l,{label:"Email",type:"email",placeholder:"Enter your email...",name:"email",register:s,rules:{required:"Email is required",pattern:{value:/[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+/,message:"Email is not valid"}},error:a.email})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between w-full md:gap-5 gap-3",children:[e.jsx("div",{className:"lg:w-3/6 md:w-2/4",children:e.jsx(l,{label:"Password",type:"password",placeholder:"Enter your password...",name:"password",register:s,rules:{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).+$/,message:"Password must contain uppercase, lowercase, number, and special character"}},error:a.password})}),e.jsx("div",{className:"lg:w-3/6 md:w-2/4",children:e.jsx(l,{label:"Confirm Password",type:"password",placeholder:"Confirm your password...",name:"confirmPassword",register:s,rules:{required:"Confirmation is required",validate:t=>t===w("password")||"Password do not match"},error:a.confirmPassword})})]}),e.jsx(R,{label:"Sign Up"})]}),e.jsx("div",{className:"md:mb-5",children:e.jsxs("p",{className:"text-center",children:["Already have an account?"," ",e.jsxs(q,{to:"/login",children:[" ",e.jsx("b",{className:"text-[var(--primary-color)]",children:"Login"})," "]})," "]})}),e.jsx("div",{className:"divider w-full lg:w-5/6 mx-auto md:mb-9",children:e.jsxs("p",{className:"text-sm md:text-lg",children:[e.jsx("b",{children:"Signup "}),"With Others"]})}),e.jsx(A,{})]}),e.jsx(F,{imgClass:"h-full"})]})})}export{G as default};
